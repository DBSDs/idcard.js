(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[434],{215:(e,n,t)=>{"use strict";t.r(n),t.d(n,{assets:()=>j,contentTitle:()=>v,default:()=>b,frontMatter:()=>p,metadata:()=>r,toc:()=>x});const r=JSON.parse('{"id":"local","title":"\u672c\u5730\u90e8\u7f72","description":"\u5e38\u89c4\u65b9\u5f0f\u8bbf\u95ee\u4e3a CDN \u8bbf\u95ee tesseract.js\uff0c\u5982\u679c\u9700\u8981\u672c\u5730\u8bbf\u95ee\uff0c\u5219\u9700\u8981\u5982\u4e0b\u64cd\u4f5c\uff1a","source":"@site/docs/local.mdx","sourceDirName":".","slug":"/local","permalink":"/idcard.js/docs/local","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"locale":"zh-Hans"},"sidebar":"tutorialSidebar","previous":{"title":"\u793a\u4f8b","permalink":"/idcard.js/docs/example"}}');var i=t(6106),o=t(2036),s=t(7378),a=t(5724),c=t(2053),l=t(1612),d=t(9231),u=t(7484),h=t(6992);function f(){const[e,n]=(0,s.useState)({}),[t,r]=(0,s.useState)(!1),o={name:"file",maxCount:1,accept:".png,.jpg",beforeUpload:e=>(r(!0),(0,h.recognize)(e,{workerPath:"/idcard.js/tesseract/worker.min.js",corePath:"/idcard.js/tesseract/tesseract-core.wasm.js"}).then((e=>{e.orginalData=void 0,n(e)})).finally((()=>{r(!1)})),!1)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.A,{...o,children:(0,i.jsx)(c.Ay,{icon:(0,i.jsx)(u.A,{}),loading:t,children:"\u4e0a\u4f20\u8eab\u4efd\u8bc1"})}),(0,i.jsx)(l.A,{spinning:t,children:(0,i.jsx)(d.A.TextArea,{style:{marginTop:"32px"},disabled:!0,value:JSON.stringify(e),placeholder:"\u8fd4\u56de\u7ed3\u679c",autoSize:{minRows:6,maxRows:6}})})]})}const p={sidebar_position:3,locale:"zh-Hans"},v="\u672c\u5730\u90e8\u7f72",j={},x=[{value:"1\u3001\u5c06\u9759\u6001\u6587\u4ef6\u590d\u5236\u81f3\u672c\u5730\u670d\u52a1\u5668\u4e0a",id:"1\u5c06\u9759\u6001\u6587\u4ef6\u590d\u5236\u81f3\u672c\u5730\u670d\u52a1\u5668\u4e0a",level:2},{value:"2\u3001\u5728\u4ee3\u7801\u4e2d\u6dfb\u52a0\u672c\u5730\u8def\u5f84",id:"2\u5728\u4ee3\u7801\u4e2d\u6dfb\u52a0\u672c\u5730\u8def\u5f84",level:2},{value:"\u793a\u4f8b",id:"\u793a\u4f8b",level:2}];function m(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"\u672c\u5730\u90e8\u7f72",children:"\u672c\u5730\u90e8\u7f72"})}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsx)(n.p,{children:"\u5e38\u89c4\u65b9\u5f0f\u8bbf\u95ee\u4e3a CDN \u8bbf\u95ee tesseract.js\uff0c\u5982\u679c\u9700\u8981\u672c\u5730\u8bbf\u95ee\uff0c\u5219\u9700\u8981\u5982\u4e0b\u64cd\u4f5c\uff1a"})}),"\n",(0,i.jsx)(n.h2,{id:"1\u5c06\u9759\u6001\u6587\u4ef6\u590d\u5236\u81f3\u672c\u5730\u670d\u52a1\u5668\u4e0a",children:"1\u3001\u5c06\u9759\u6001\u6587\u4ef6\u590d\u5236\u81f3\u672c\u5730\u670d\u52a1\u5668\u4e0a"}),"\n",(0,i.jsxs)(n.p,{children:["\u5728",(0,i.jsx)(n.code,{children:"node_modules/idcard.js/tesseract"}),"\u79fb\u52a8\u81f3\u672c\u5730\u9759\u6001\u6587\u4ef6\u5939\u5185\uff1a\u5982 ",(0,i.jsx)(n.code,{children:"/public/"}),"\u3001",(0,i.jsx)(n.code,{children:"/static/"})," \u7b49"]}),"\n",(0,i.jsx)(n.h2,{id:"2\u5728\u4ee3\u7801\u4e2d\u6dfb\u52a0\u672c\u5730\u8def\u5f84",children:"2\u3001\u5728\u4ee3\u7801\u4e2d\u6dfb\u52a0\u672c\u5730\u8def\u5f84"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'recognize(file, {\n  workerPath: "/idcard.js/tesseract/worker.min.js",\n  corePath: "/idcard.js/tesseract/tesseract-core.wasm.js",\n});\n'})}),"\n",(0,i.jsx)(n.h2,{id:"\u793a\u4f8b",children:"\u793a\u4f8b"}),"\n","\n",(0,i.jsx)(f,{})]})}function b(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(m,{...e})}):m(e)}},6992:function(e,n,t){!function(e){"use strict";function n(e,n,t,r){return new(t||(t=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,a)}c((r=r.apply(e,n||[])).next())}))}function r(e,n){var t,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(t=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=n.call(e,o)}catch(e){a=[6,e],r=0}finally{t=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}"function"==typeof SuppressedError&&SuppressedError;var i=/\u540d(.*)/,o=/\u7537|\u5973/,s=/\u6c11\u65cf (.*)/,a=/^\d{4}\u5e74(?:0?[1-9]|1[0-2])\u6708(?:0?[1-9]|[12][0-9]|3[01])\u65e5$/,c=/^[1-9]\d{5}(18|19|20)\d{2}((0[1-9])|(1[0-2]))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/,l=/(\u5317\u4eac\u5e02|\u5929\u6d25\u5e02|\u4e0a\u6d77\u5e02|\u91cd\u5e86\u5e02|\u6cb3\u5317\u7701|\u5c71\u897f\u7701|\u8fbd\u5b81\u7701|\u5409\u6797\u7701|\u9ed1\u9f99\u6c5f\u7701|\u6c5f\u82cf\u7701|\u6d59\u6c5f\u7701|\u5b89\u5fbd\u7701|\u798f\u5efa\u7701|\u6c5f\u897f\u7701|\u5c71\u4e1c\u7701|\u6cb3\u5357\u7701|\u6e56\u5317\u7701|\u6e56\u5357\u7701|\u5e7f\u4e1c\u7701|\u6d77\u5357\u7701|\u56db\u5ddd\u7701|\u8d35\u5dde\u7701|\u4e91\u5357\u7701|\u9655\u897f\u7701|\u7518\u8083\u7701|\u9752\u6d77\u7701|\u53f0\u6e7e\u7701|\u5185\u8499\u53e4\u81ea\u6cbb\u533a|\u5e7f\u897f\u58ee\u65cf\u81ea\u6cbb\u533a|\u897f\u85cf\u81ea\u6cbb\u533a|\u5b81\u590f\u56de\u65cf\u81ea\u6cbb\u533a|\u65b0\u7586\u7ef4\u543e\u5c14\u81ea\u6cbb\u533a|\u9999\u6e2f\u7279\u522b\u884c\u653f\u533a|\u6fb3\u95e8\u7279\u522b\u884c\u653f\u533a).*/;e.recognize=function(e,d){return n(this,void 0,void 0,(function(){var n,u,h,f;return r(this,(function(r){switch(r.label){case 0:return[4,t.e(398).then(t.t.bind(t,7398,23))];case 1:return[4,(0,r.sent().default.createWorker)("chi_sim",3,d)];case 2:return[4,(n=r.sent()).recognize(e)];case 3:return u=r.sent(),h=u.data,[4,n.terminate()];case 4:return r.sent(),(f={orginalData:h}).name=function(e){var n,t=e.lines,r=void 0,o=null===(n=null==t?void 0:t[0])||void 0===n?void 0:n.text.match(i);return o&&(r=o[1].split(" ").filter((function(e){return e})).join("")),r}(h),f.sex=function(e){var n,t=e.lines,r=void 0,i=null===(n=null==t?void 0:t[1])||void 0===n?void 0:n.text.match(o);return i&&(r=i[0]),r}(h),f.nation=function(e){var n,t=e.lines,r=void 0,i=null===(n=null==t?void 0:t[1])||void 0===n?void 0:n.text.match(s);return i&&(r=i[1]),r}(h),f.birthday=function(e){var n,t=e.lines,r=void 0,i=null===(n=null==t?void 0:t[2])||void 0===n?void 0:n.words.slice(2).map((function(e){return e.text})).join("");return a.test(i)&&(r=i),r}(h),f.address=function(e){var n=void 0,t=e.lines.slice(2,-1).map((function(e){return e.words.map((function(e){return e.text})).join("")})).join("").match(l);return t&&(n=t[0]),n}(h),f.cardId=function(e){var n,t=e.lines,r=void 0,i=null===(n=null==t?void 0:t[6])||void 0===n?void 0:n.text.match(c);return i&&(r=i[0]),r}(h),[2,f]}}))}))}}(n)}}]);