(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[828],{4135:(n,e,t)=>{"use strict";t.r(e),t.d(e,{assets:()=>v,contentTitle:()=>m,default:()=>b,frontMatter:()=>h,metadata:()=>r,toc:()=>x});const r=JSON.parse('{"id":"example","title":"\u793a\u4f8b","description":"","source":"@site/docs/example.mdx","sourceDirName":".","slug":"/example","permalink":"/idcard.js/docs/example","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"locale":"zh-Hans"},"sidebar":"tutorialSidebar","previous":{"title":"\u7b80\u4ecb","permalink":"/idcard.js/docs/intro"},"next":{"title":"\u672c\u5730\u90e8\u7f72","permalink":"/idcard.js/docs/local"}}');var o=t(6106),i=t(2036),a=t(7378),s=t(5724),l=t(2053),c=t(1612),u=t(9231),d=t(7484),p=t(6992);function f(){const[n,e]=(0,a.useState)({}),[t,r]=(0,a.useState)(!1),i={name:"file",maxCount:1,accept:".png,.jpg",beforeUpload:n=>(r(!0),(0,p.recognize)(n).then((n=>{n.orginalData=void 0,e(n)})).finally((()=>{r(!1)})),!1)};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.A,{...i,children:(0,o.jsx)(l.Ay,{icon:(0,o.jsx)(d.A,{}),loading:t,children:"\u4e0a\u4f20\u8eab\u4efd\u8bc1"})}),(0,o.jsx)(c.A,{spinning:t,children:(0,o.jsx)(u.A.TextArea,{style:{marginTop:"32px"},disabled:!0,value:JSON.stringify(n),placeholder:"\u8fd4\u56de\u7ed3\u679c",autoSize:{minRows:6,maxRows:6}})})]})}const h={sidebar_position:3,locale:"zh-Hans"},m="\u793a\u4f8b",v={},x=[];function g(n){const e={code:"code",h1:"h1",header:"header",pre:"pre",...(0,i.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.header,{children:(0,o.jsx)(e.h1,{id:"\u793a\u4f8b",children:"\u793a\u4f8b"})}),"\n","\n",(0,o.jsx)(f,{}),"\n",(0,o.jsx)("br",{}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-tsx",children:'import { useState } from "react";\nimport { Upload, Button, Input, message, UploadProps, Spin } from "antd";\nimport { UploadOutlined } from "@ant-design/icons";\nimport { recognize } from "idcard.js";\n\nexport default function () {\n  const [data, setdata] = useState({});\n  const [loading, setLoading] = useState(false);\n\n  const props: UploadProps = {\n    name: "file",\n    maxCount: 1,\n    accept: ".png,.jpg",\n    beforeUpload: (file) => {\n      setLoading(true);\n      recognize(file)\n        .then((res) => {\n          const _res = res;\n          (_res.orginalData as any) = undefined;\n          setdata(res);\n        })\n        .finally(() => {\n          setLoading(false);\n        });\n      return false;\n    },\n  };\n\n  return (\n    <>\n      <Upload {...props}>\n        <Button icon={<UploadOutlined />} loading={loading}>\n          \u4e0a\u4f20\u8eab\u4efd\u8bc1\n        </Button>\n      </Upload>\n      <Spin spinning={loading}>\n        <Input.TextArea\n          style={{ marginTop: "32px" }}\n          disabled\n          value={JSON.stringify(data)}\n          placeholder="\u8fd4\u56de\u7ed3\u679c"\n          autoSize={{ minRows: 6, maxRows: 6 }}\n        />\n      </Spin>\n    </>\n  );\n}\n'})})]})}function b(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(g,{...n})}):g(n)}},6992:function(n,e,t){!function(n){"use strict";function e(n,e,t,r){return new(t||(t=Promise))((function(o,i){function a(n){try{l(r.next(n))}catch(n){i(n)}}function s(n){try{l(r.throw(n))}catch(n){i(n)}}function l(n){var e;n.done?o(n.value):(e=n.value,e instanceof t?e:new t((function(n){n(e)}))).then(a,s)}l((r=r.apply(n,e||[])).next())}))}function r(n,e){var t,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(t)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(t=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(n,i)}catch(n){s=[6,n],r=0}finally{t=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}"function"==typeof SuppressedError&&SuppressedError;var o=/\u540d(.*)/,i=/\u7537|\u5973/,a=/\u6c11\u65cf (.*)/,s=/^\d{4}\u5e74(?:0?[1-9]|1[0-2])\u6708(?:0?[1-9]|[12][0-9]|3[01])\u65e5$/,l=/^[1-9]\d{5}(18|19|20)\d{2}((0[1-9])|(1[0-2]))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/,c=/(\u5317\u4eac\u5e02|\u5929\u6d25\u5e02|\u4e0a\u6d77\u5e02|\u91cd\u5e86\u5e02|\u6cb3\u5317\u7701|\u5c71\u897f\u7701|\u8fbd\u5b81\u7701|\u5409\u6797\u7701|\u9ed1\u9f99\u6c5f\u7701|\u6c5f\u82cf\u7701|\u6d59\u6c5f\u7701|\u5b89\u5fbd\u7701|\u798f\u5efa\u7701|\u6c5f\u897f\u7701|\u5c71\u4e1c\u7701|\u6cb3\u5357\u7701|\u6e56\u5317\u7701|\u6e56\u5357\u7701|\u5e7f\u4e1c\u7701|\u6d77\u5357\u7701|\u56db\u5ddd\u7701|\u8d35\u5dde\u7701|\u4e91\u5357\u7701|\u9655\u897f\u7701|\u7518\u8083\u7701|\u9752\u6d77\u7701|\u53f0\u6e7e\u7701|\u5185\u8499\u53e4\u81ea\u6cbb\u533a|\u5e7f\u897f\u58ee\u65cf\u81ea\u6cbb\u533a|\u897f\u85cf\u81ea\u6cbb\u533a|\u5b81\u590f\u56de\u65cf\u81ea\u6cbb\u533a|\u65b0\u7586\u7ef4\u543e\u5c14\u81ea\u6cbb\u533a|\u9999\u6e2f\u7279\u522b\u884c\u653f\u533a|\u6fb3\u95e8\u7279\u522b\u884c\u653f\u533a).*/;n.recognize=function(n,u){return e(this,void 0,void 0,(function(){var e,d,p,f;return r(this,(function(r){switch(r.label){case 0:return[4,t.e(398).then(t.t.bind(t,7398,23))];case 1:return[4,(0,r.sent().default.createWorker)("chi_sim",3,u)];case 2:return[4,(e=r.sent()).recognize(n)];case 3:return d=r.sent(),p=d.data,[4,e.terminate()];case 4:return r.sent(),(f={orginalData:p}).name=function(n){var e,t=n.lines,r=void 0,i=null===(e=null==t?void 0:t[0])||void 0===e?void 0:e.text.match(o);return i&&(r=i[1].split(" ").filter((function(n){return n})).join("")),r}(p),f.sex=function(n){var e,t=n.lines,r=void 0,o=null===(e=null==t?void 0:t[1])||void 0===e?void 0:e.text.match(i);return o&&(r=o[0]),r}(p),f.nation=function(n){var e,t=n.lines,r=void 0,o=null===(e=null==t?void 0:t[1])||void 0===e?void 0:e.text.match(a);return o&&(r=o[1]),r}(p),f.birthday=function(n){var e,t=n.lines,r=void 0,o=null===(e=null==t?void 0:t[2])||void 0===e?void 0:e.words.slice(2).map((function(n){return n.text})).join("");return s.test(o)&&(r=o),r}(p),f.address=function(n){var e=void 0,t=n.lines.slice(2,-1).map((function(n){return n.words.map((function(n){return n.text})).join("")})).join("").match(c);return t&&(e=t[0]),e}(p),f.cardId=function(n){var e,t=n.lines,r=void 0,o=null===(e=null==t?void 0:t[6])||void 0===e?void 0:e.text.match(l);return o&&(r=o[0]),r}(p),[2,f]}}))}))}}(e)}}]);